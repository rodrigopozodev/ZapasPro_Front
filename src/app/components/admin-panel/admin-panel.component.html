<div class="flex min-h-screen bg-[#f3e8d5]">
  <!-- Sidebar -->
  <div class="w-1/10 bg-white p-4 rounded-lg shadow-lg border border-yellow-300 fixed h-fit top-1/2 transform -translate-y-1/2">
    <ul class="space-y-4">
      <li>
        <button (click)="showUserSection()" class="w-full text-left text-yellow-700 hover:bg-yellow-100 p-3 rounded-lg transition duration-200">Usuarios</button>
      </li>
      <li>
        <button (click)="showProductSection()" class="w-full text-left text-yellow-700 hover:bg-yellow-100 p-3 rounded-lg transition duration-200">Productos</button>
      </li>
      <li>
        <button (click)="showReceiptSection()" class="w-full text-left text-yellow-700 hover:bg-yellow-100 p-3 rounded-lg transition duration-200">Recibos</button>
      </li>
    </ul>
  </div>

  <!-- Contenido Principal -->
  <div class="flex-1 ml-24 p-12">
    <h1 class="text-3xl font-extrabold text-yellow-600 mb-6 animate-fadeIn text-center">Administración</h1>

    <!-- Sección de usuarios -->
    <div *ngIf="showUsers" class="table-container w-full bg-white p-6 rounded-lg shadow-lg mb-10 border border-yellow-300">
      <h2 class="text-2xl font-bold text-yellow-800 mb-4 text-center">Usuarios</h2>
      <table class="min-w-full border-collapse text-center">
        <thead class="bg-yellow-200">
          <tr>
            <th class="border border-yellow-300 p-2">ID</th>
            <th class="border border-yellow-300 p-2">Nombre de Usuario</th>
            <th class="border border-yellow-300 p-2">Rol</th>
            <th class="border border-yellow-300 p-2">Fecha de Creación</th>
            <th class="border border-yellow-300 p-2">Última Actualización</th>
            <th class="border border-yellow-300 p-2">Acciones</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let user of users" class="hover:bg-yellow-100 transition duration-300">
            <td class="border border-yellow-300 p-2">{{ user.id }}</td>
            <td class="border border-yellow-300 p-2">{{ user.username }}</td>
            <td class="border border-yellow-300 p-2">{{ user.role }}</td>
            <td class="border border-yellow-300 p-2 whitespace-nowrap">{{ user.createdAt | date:'short' }}</td>
            <td class="border border-yellow-300 p-2 whitespace-nowrap">{{ user.updatedAt | date:'short' }}</td>
            <td class="border border-yellow-300 p-2">
              <button (click)="editUser(user)" class="bg-yellow-500 text-white hover:bg-yellow-600 p-2 rounded-lg transition duration-200">Editar</button>
            </td>
          </tr>
        </tbody>
      </table>

      <!-- Formulario de edición de usuario -->
      <div *ngIf="currentUser" class="mt-6 p-4 border border-yellow-300 rounded-lg bg-yellow-50">
        <h3 class="text-xl font-bold text-yellow-600 mb-2">Editar Usuario</h3>
        <form (ngSubmit)="updateUser()">
          <label for="username" class="block mb-2">Nombre de Usuario:</label>
          <input type="text" id="username" [(ngModel)]="currentUser.username" name="username" class="border border-yellow-300 p-2 w-full rounded-lg mb-4" required />

          <label for="role" class="block mb-2">Rol:</label>
          <select id="role" [(ngModel)]="currentUser.role" name="role" class="border border-yellow-300 p-2 w-full rounded-lg mb-4" required>
            <option value="admin">Admin</option>
            <option value="client">Cliente</option>
          </select>

          <button type="submit" class="bg-yellow-500 text-white hover:bg-yellow-600 p-2 rounded-lg transition duration-200">Guardar Cambios</button>
          <button type="button" (click)="cancelEdit()" class="bg-red-500 text-white hover:bg-red-600 p-2 rounded-lg transition duration-200 ml-2">Cancelar</button>
        </form>
      </div>
    </div>

    <!-- Contenedor para la tabla de productos -->
    <div *ngIf="showProducts" class="table-container w-full bg-white p-6 rounded-lg shadow-lg mb-10 border border-yellow-300">
      <h2 class="text-2xl font-bold text-yellow-800 mb-4 text-center">Productos</h2>
      <table class="min-w-full border-collapse text-center">
        <thead class="bg-yellow-200">
          <tr>
            <th class="border border-yellow-300 p-2">ID</th>
            <th class="border border-yellow-300 p-2">Nombre</th>
            <th class="border border-yellow-300 p-2">Precio</th>
            <th class="border border-yellow-300 p-2">Descripción</th>
            <th class="border border-yellow-300 p-2">Imagen</th>
            <th class="border border-yellow-300 p-2">Acciones</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let product of products" class="hover:bg-yellow-100 transition duration-300">
            <td class="border border-yellow-300 p-2">{{ product.id }}</td>
            <td class="border border-yellow-300 p-2">{{ product.name }}</td>
            <td class="border border-yellow-300 p-2">{{ product.price | currency }}</td>
            <td class="border border-yellow-300 p-2">{{ product.description }}</td>
            <td class="border border-yellow-300 p-2"><img [src]="product.image" alt="{{ product.name }}" class="h-16 w-16 object-cover"/></td>
            <td class="border border-yellow-300 p-2">
              <button (click)="editProduct(product)" class="bg-yellow-500 text-white hover:bg-yellow-600 p-2 rounded-lg transition duration-200">Editar</button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- Contenedor para la tabla de recibos -->
    <div *ngIf="showReceipts" class="table-container w-full bg-white p-6 rounded-lg shadow-lg border border-yellow-300">
      <h2 class="text-2xl font-bold text-yellow-800 mb-4 text-center">Recibos</h2>
      <p class="text-yellow-600 text-center">Aquí irán los recibos...</p>
      <!-- Implementa la lógica para mostrar los recibos -->
    </div>
  </div>
</div>
